# Создание искусственной жизни
![Digital Organism](https://dl.dropboxusercontent.com/u/45900723/jevo/ExMachina-header.jpg)

День добрый, братья мои! Сейчас, веселый Макак раскажет Вам о сути бытия :) Итак, вопросы возникновения и развития жизни беспокоят Ваши умы уже очень давно. Почему? Да потому что это одни из фундаментальных загадок вашего человечества, стоящие рядом со "смыслом жизни" и "кто мы такие" (у нас в лесу, кстати, мы точно знаем кто вы такие - вы засранцы :) Вырубаете деревья, забираете зверей в зоопарки, загрязняете атмосферу, а в Индонезии, вы нас еще и [едите](https://ru.wikipedia.org/wiki/%D0%9E%D0%B1%D0%B5%D0%B7%D1%8C%D1%8F%D0%BD%D1%8C%D0%B8_%D0%BC%D0%BE%D0%B7%D0%B3%D0%B8) в надежде решить  свои проблемы с размножением...). В общем, Вы почему-то, очень хотите найти на них ответы. Так же, это дает надежду на то, что сей процесс универсален и в далеких уголках вселенной, живут одинокие инопланетяшки :) Вот что об этом пишет [википедия](https://ru.wikipedia.org/wiki/%D0%96%D0%B8%D0%B7%D0%BD%D1%8C):
> Возникновение жизни или абиогенез — процесс превращения неживой природы в живую.

Очень простое и емкое [определение](https://ru.wikipedia.org/wiki/%D0%96%D0%B8%D0%B7%D0%BD%D1%8C#.D0.9E.D0.BF.D1.80.D0.B5.D0.B4.D0.B5.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F), не так ли? Разумеется, для понимания того что такое "живая" и "неживая" материя нужно их как-то разграничить. С точки зрения физики - разницы нет. И то и то набор электронов, протонов и нейтронов взаимодействующих между собой по особым правилам. Разница появляется на более высоком(абстрактном) уровне. По сути, живым можно назвать что-то, что существует, размножается и приспосабливается к среде. А этим все живые организмы как раз и занимаются.  Но что если биологический сценарий не единственный в своем роде? Споры по этому поводу ведутся и по сей день. У нас в лесу - это самая ходовая тема :) В желании доказать тот факт, что живыми могут быть не только клетки, но и машины - программисты и ученые со всей планеты трудятся над созданием [Искусственного Интеллекта](https://ru.wikipedia.org/wiki/%D0%98%D1%81%D0%BA%D1%83%D1%81%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9_%D0%B8%D0%BD%D1%82%D0%B5%D0%BB%D0%BB%D0%B5%D0%BA%D1%82). В некотором смысле - это и есть одна из форм [альтернативной жизни](https://ru.wikipedia.org/wiki/%D0%98%D1%81%D0%BA%D1%83%D1%81%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D0%B0%D1%8F_%D0%B6%D0%B8%D0%B7%D0%BD%D1%8C)...

### Обо мне
Я - первая обезъяна, научившаяся говорить, ходить и программировать одновременно. Но помимо кодирования, меня всегда увлекали фундаментальные вопросы: "почему ток бежит по проводам?", "как работает гравитация?", "почему законы физики такие, а не какие-нибудь другие?", "почему у нас хвосты красивые, а у Вас - обрубок?" и так далее и тому подобное... 5 лет назад меня заинтересовала биология, генетика и эволюционная теория. Такие знания, сами по себе, не применимы в жизни, если ты не ученый или не участник программы "О, счастливчик" с темой "биология". В основном они отталкивают от тебя людей и ты становишся занудой и ботаном. Но если ты программист :-P то как велик соблазн попробовать себя в роди создателя :) и понеслась... И все же, когда пыл осядет, а амбиции успокоятся, нужно заглянуть в интернет и проверить что же думает об этом научное сообщество. Так, я узнал о существовании [цифровых организмов](https://ru.wikipedia.org/wiki/%D0%A6%D0%B8%D1%84%D1%80%D0%BE%D0%B2%D0%BE%D0%B9_%D0%BE%D1%80%D0%B3%D0%B0%D0%BD%D0%B8%D0%B7%D0%BC).

### Цифровые организмы
Для начала, дадим определение:
> Цифровой организм — самовоспроизводящаяся компьютерная программа, которая [мутирует](https://ru.wikipedia.org/wiki/%D0%9C%D1%83%D1%82%D0%B0%D1%86%D0%B8%D1%8F) и развивается. Цифровые организмы используют в качестве инструмента для изучения динамики эволюции по [Дарвину](https://ru.wikipedia.org/wiki/%D0%94%D0%B0%D1%80%D0%B2%D0%B8%D0%BD,_%D0%A7%D0%B0%D1%80%D0%BB%D1%8C%D0%B7), для тестирования или проверки конкретных гипотез или математических моделей [эволюции](https://ru.wikipedia.org/wiki/%D0%AD%D0%B2%D0%BE%D0%BB%D1%8E%D1%86%D0%B8%D1%8F). Эти исследования тесно связаны с областью создания [искусственной жизни](https://ru.wikipedia.org/wiki/%D0%98%D1%81%D0%BA%D1%83%D1%81%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D0%B0%D1%8F_%D0%B6%D0%B8%D0%B7%D0%BD%D1%8C).

По сути - мы говорим о маленьких программках, которые выступают в роли биологических организмов. Они живут в памяти компьютера, размножаются, питаются, двигаются, охотятся, в общем, делают все, что присуще их биологическим братьям. Но самое главное - они подчиняются тем же правилам, которым следует все живое на этой планете. Каким? А вот каким:
- размножаться, как можно больше
- периодически мутировать (меняться)
- передавать все свои свойства следующему поколению

Что дает нам такая система? Теоретически мы можем прийти к тем же результатам, которые выглянув в окно можно заметить невооруженным глазом. Я имею ввиду - эволюционный прогресс, и как побочный эффект - сложность организмов. Почему это важно? По нескольким причинам. Во-первых, мы можем получить различные формы Искусственного Интеллекта. Во-вторых, такую систему можно использовать в обущающих целях. И в третьих - это невероятно круто и непонятно к чему именно можно прийти в такого рода экспериментах. А нас всегда манит неизведанное, ведь так? :) Но разумеется, не все так просто. Почему? Потому что, для просчета такой системы, потребуются невероятные вычислительные ресурсы. И даже всех Ваших компьютеров для этого не хватит. Да, наша природа обладает невероятно мощным интерпретатором :) Но не стоит унывать, ведь у компании Intel далеко идущие планы, да и виртуальный мир мы можем значительно упростить.

### Конкуренты
Самой известной программой, реализующей указанные выше принципы является [Avida](https://en.wikipedia.org/wiki/Avida). По [этой ссылке](https://www.youtube.com/watch?v=oDC5BxiBakY) Вы можете ознакомиться с небольшим пояснением того, как она работает. Если захотите понять больше деталей, то вам [сюда](https://www.youtube.com/watch?v=ouF8wKxXWFQ). Думаю, так же, стоит упомянуть о прородителях - программах, которые появились задолго до того, как написали Avida. А именно: [Tierra](https://en.wikipedia.org/wiki/Tierra_(computer_simulation)) и [Core Wars](https://en.wikipedia.org/wiki/Core_War), которые внесли свой вклад в развитие этой области. Но все же, я бы хотел представить вашему вниманию другой проект - [jevo](https://github.com/tmptrash/jevo).

### jevo
Читается, как "джево" или "джей иво" и означает "Julia Evolution". Ничего особенного в этом названии нет и это никак не связано с эволюцией тех прекрасных особ, которых Вы так любите :) Просто [Julia](julialang.org) - это язык программирования, а Evolution - ну, сами понимаете. Это то, где Вы нас немного обогнали. Суть системы проста - это эмулятор виртуального мира, где живут, размножаются и приспосабливаются упомянутые цифровые организмы. Если спросите, как выглядит эта система? Пожалуйста:

![jevo screenshot](https://dl.dropboxusercontent.com/u/45900723/jevo/jevo.png)

Вот, что здесь происходит. Видите окошко по центру справа? Это 2D визуализатор (клиент), который "показывает", что происходит в "их" мире. Разноцветные точки - это и есть цифровые организмы(небольшие программы). Небольшое количество зеленых точек - это энергия или еда. Окно слева - серевер. На нем просходит вся магия:
- параллельное выполнение кода всех цифровых организмов
- обслуживание сталкновений
- периодические мутации
- уничтожение менее приспособленных
- управление виртуальным миром
- и т.д.

Центральным понятием в жизни любого цифрового существа является энергия. Если она заканчивается - организм умирает. По этому, отбор уничтожает тех, кто не смог "найти" пропитание. Таким образом формируется вектор развития всей популяции - "найти, как можно больше еды". Так же, каждый организм представлен своим собственным кодом, который полностью решает, чем занято виртуальное животное. Код дописывается системой на основе [генетического алгоритма](https://ru.wikipedia.org/wiki/%D0%93%D0%B5%D0%BD%D0%B5%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9_%D0%B0%D0%BB%D0%B3%D0%BE%D1%80%D0%B8%D1%82%D0%BC). Это такие специальные правила поиска оптимального решения. А решением в нашем случае является оптимальный алгоритм поиска еды. Причем едой могут быть как энергетические блоки, так и сами организмы. Если Вы хотите больше красивых видео о генетическом алгоритме, то вам [сюда](https://www.youtube.com/watch?v=JBgG_VSP7f8) и [сюда](https://www.youtube.com/watch?v=uxourrlPlf8). Образовательные видео [здесь](https://jevosite.wordpress.com/2016/10/25/%D0%BF%D0%BE%D1%81%D1%82-6-%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE-%D0%BC%D0%B0%D1%82%D0%B5%D1%80%D0%B8%D0%B0%D0%BB%D1%8B/). Объясняя на пальцах, что такое ГА можно представить вот что:

```
1. INITIALIZE random organisms
2. EVALUATE each organism (fitness)
3. while !terminate do
4.   SELECT parents organisms for next generation
5.   RECOMBINE parents
6.   MUTATE children
7.   EVALUATE each organism (fitness)
8. end
```

Что это такое? Это реализация генетического алгоритма на абстрактном языке программирования. Сначала мы создаем рандомную популяцию организмов с пустым кодом (шаг 1). Далее, подсчитываем их "приспособленность" (в нашем случае это количество энергии, шаг 2). Потом, крутимся в цикле, пока не выполнится какое-то условие выхода, будь то время или получение нужного результата... (шаг 3). Находясь внутри цикла, мы выбираем родителей для получения потомства (шаг 4), рекомбинируем их генетический материал (код)(шаг 5), немного мутируем этот код (шаг 6) и подсчитываем приспособленность новой популяции (шаг 7). Под новой, в данном случае подразумевается старая + родившиеся "дети". И так до бесконечности... Пока все понятно? Окей, тогда пришло время глянуть на систему в динамике (смотреть на полный экран и в 1080, иначе ничего не увидите):

[![jevo](https://dl.dropboxusercontent.com/u/45900723/jevo/jevo-1.1-rc1.jpg)](https://youtu.be/79Fh7PNT6qY)

Что же мы увидели? Там было много зеленых точек, которые не двигались (это энергия, которую нужно съесть). Около пяти островков фиолетовых - это один из видов цифровых организмов, которые выжидают "бегунцов" и съедают их при приближении. И много двигающихся с разной траекторией точек (другие виды организмов - "бегунцы"). Стоит пояснить, что это результат примерно двухдневного запуска системы. Причем я никак не влиял на процесс их обучения. И никак не вмешивался. Важно обратить внимание на детали: как именно они двигаются, в какую сторону бегут и, главное, почему они это делают. Мы ведь все тут программисты, правда? Тогда, взглянем на код:

```julia
function (c::Config.ConfigData,o::Creature.Organism)
    local var_1::Int8 = 110
    Creature.eatUp(c,o,Int(var_1))
    Creature.eatDown(c,o,Int(var_1))
    Creature.eatDown(c,o,Int(var_1))
    Creature.eatUp(c,o,Int(var_1))
    return true
end
```

Следует так же упомянуть, что все начиналось с пустого кода, а если быть точным, то с пустой функции. А пример выше, сформировался в результате нескольких десятков тысяч поколений. Что он делает? Эти функции `Creature.eatUp()` и `Creature.eatDown()` означают "укуси" сверху или снизу относительно собственной позиции. Последний параметр, `var_1` - это то, сколько "откусить". По сути, он просто сидит и ждет пока к нему кто-то подползет, после чего, жертва будет съедена. Вы спросите: "Откуда организм вообще знает, какие функции нужно вызывать?" или "Какие функции вообще существуют?". Система предоставляет некий набор из:
- математический операций для работы с переменными: +,-,/,%,$,...
- функций движения: `Creature.stepRight()`, `Creature.stepDown()`,...
- питания: `Creature.eatLeft()`, `Creature.eatRight()`,...
- бинарные операции: `xor`, `or`, `and`,...
- тригонометрию: `sin()`, `cos()`, `tan()`,...
- разных типов: `Int`, `Bool`, `Float64`, `String`,...
- работы с памятью: `toMem()`, `fromMem()`,...
- определение своих и чужих параметров: `myX()/myY()`, `energyLeft()`, `idRight()`,...
- возможность примитивного зрения: `lookAt(x,y)`

Для тех, кто немного разбирается в эволюционной биологии, вот список аналогов стандартным терминам, которые мы, как программисты используем при проектировании такой виртуальной системы (слева - биологические термины, справа термины компьютерной модели):
- ДНК - компьютерный код
- ген - функция
- организм - объект в памяти(цифровой организм) со всеми свойствами типа возраст, цвет, код, внутренняя память и т.д.
- популяция организмов - популяция цифровых организмов
- мутация ДНК - изменение кусочка кода
- естественный отбор - формализированное правило удаления неприспособленных цифровых организмов
- наследственность - возможность делать копию цифрового организма с небольшими мутациями

Для начала, нам нужно выбрать язык
