# Создание искусственной жизни
![Digital Organism](https://dl.dropboxusercontent.com/u/45900723/jevo/ExMachina-header.jpg)

День добрый, братья мои! Сейчас, веселый Макак раскажет Вам о сути бытия :) Итак, вопросы возникновения и развития жизни беспокоят Ваши умы уже очень давно. Почему? Да потому что это одни из фундаментальных загадок вашего человечества, стоящие рядом со "смыслом жизни" и "кто мы такие" (у нас в лесу, кстати, мы точно знаем кто вы такие - вы засранцы :) Вырубаете деревья, забираете зверей в зоопарки, загрязняете атмосферу, а в Индонезии, вы нас еще и [едите](https://ru.wikipedia.org/wiki/%D0%9E%D0%B1%D0%B5%D0%B7%D1%8C%D1%8F%D0%BD%D1%8C%D0%B8_%D0%BC%D0%BE%D0%B7%D0%B3%D0%B8) в надежде решить  свои проблемы с размножением...). В общем, Вы почему-то, очень хотите найти на них ответы. Так же, это дает надежду на то, что сей процесс универсален и в далеких уголках вселенной, живут одинокие инопланетяшки :) Вот что об этом пишет [википедия](https://ru.wikipedia.org/wiki/%D0%96%D0%B8%D0%B7%D0%BD%D1%8C):
> Возникновение жизни или абиогенез — процесс превращения неживой природы в живую.

Очень простое и емкое [определение](https://ru.wikipedia.org/wiki/%D0%96%D0%B8%D0%B7%D0%BD%D1%8C#.D0.9E.D0.BF.D1.80.D0.B5.D0.B4.D0.B5.D0.BB.D0.B5.D0.BD.D0.B8.D1.8F), не так ли? Разумеется, для понимания того что такое "живая" и "неживая" материя нужно их как-то разграничить. С точки зрения физики - разницы нет. И то и то набор электронов, протонов и нейтронов взаимодействующих между собой по особым правилам. Разница появляется на более высоком(абстрактном) уровне. По сути, живым можно назвать что-то, что существует, размножается и приспосабливается к среде. А этим все живые организмы как раз и занимаются.  Но что если биологический сценарий не единственный в своем роде? Споры по этому поводу ведутся и по сей день. У нас в лесу - это самая ходовая тема :) В желании доказать тот факт, что живыми могут быть не только клетки, но и машины - программисты и ученые со всей планеты трудятся над созданием [Искусственного Интеллекта](https://ru.wikipedia.org/wiki/%D0%98%D1%81%D0%BA%D1%83%D1%81%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9_%D0%B8%D0%BD%D1%82%D0%B5%D0%BB%D0%BB%D0%B5%D0%BA%D1%82). В некотором смысле - это и есть одна из форм [альтернативной жизни](https://ru.wikipedia.org/wiki/%D0%98%D1%81%D0%BA%D1%83%D1%81%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D0%B0%D1%8F_%D0%B6%D0%B8%D0%B7%D0%BD%D1%8C)...

### Обо мне
Я - первая обезьяна, научившаяся говорить, ходить и программировать одновременно. Но помимо кодирования, меня всегда увлекали фундаментальные вопросы: "почему ток бежит по проводам?", "как работает гравитация?", "почему законы физики такие, а не какие-нибудь другие?" и "почему у нас хвосты красивые, а у Вас - обрубок?" и так далее и тому подобное... 5 лет назад меня заинтересовала биология, генетика и эволюционная теория. Такие знания, сами по себе, не применимы в жизни, если ты не ученый или не участник программы "О, счастливчик" с темой "биология". В основном они отталкивают от тебя людей и ты становишся занудой и ботаном. Но если ты программист :-P то как велик соблазн попробовать себя в роди создателя :) и понеслась... И все же, когда пыл осядет, а амбиции успокоятся, нужно заглянуть в интернет и проверить что же думает об этом научное сообщество. Так, я узнал о существовании [цифровых организмов](https://ru.wikipedia.org/wiki/%D0%A6%D0%B8%D1%84%D1%80%D0%BE%D0%B2%D0%BE%D0%B9_%D0%BE%D1%80%D0%B3%D0%B0%D0%BD%D0%B8%D0%B7%D0%BC).

### Цифровые организмы
Для начала, дадим определение:
> Цифровой организм — самовоспроизводящаяся компьютерная программа, которая [мутирует](https://ru.wikipedia.org/wiki/%D0%9C%D1%83%D1%82%D0%B0%D1%86%D0%B8%D1%8F) и развивается. Цифровые организмы используют в качестве инструмента для изучения динамики эволюции по [Дарвину](https://ru.wikipedia.org/wiki/%D0%94%D0%B0%D1%80%D0%B2%D0%B8%D0%BD,_%D0%A7%D0%B0%D1%80%D0%BB%D1%8C%D0%B7), для тестирования или проверки конкретных гипотез или математических моделей [эволюции](https://ru.wikipedia.org/wiki/%D0%AD%D0%B2%D0%BE%D0%BB%D1%8E%D1%86%D0%B8%D1%8F). Эти исследования тесно связаны с областью создания [искусственной жизни](https://ru.wikipedia.org/wiki/%D0%98%D1%81%D0%BA%D1%83%D1%81%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D0%B0%D1%8F_%D0%B6%D0%B8%D0%B7%D0%BD%D1%8C).

По сути - мы говорим о маленьких программках, которые выступают в роли биологических организмов. Они живут в памяти компьютера, размножаются, питаются, двигаются, охотятся, в общем, делают все, что присуще их биологическим братьям. Но самое главное - они подчиняются тем же правилам, которым следует все живое на этой планете. Каким? А вот каким:
- размножаться, как можно больше
- периодически мутировать (меняться)
- передавать все свои свойства следующему поколению

Что дает нам такая система? Теоретически мы можем прийти к тем же результатам, которые заглянув в зеркало можно заметить невооруженным глазом. Не льстите себе, Вы не так прекрасны, как думаете. Вот бегемотихи - совсем другое дело... Что-то я отвлекся... Так вот, я имею ввиду - эволюционный прогресс, и как побочный эффект - сложность организмов. Почему это важно? По нескольким причинам. Во-первых, мы можем получить различные формы Искусственного Интеллекта. Во-вторых, такую систему можно использовать для обучения эволюции в школах. И в третьих - это невероятно круто и непонятно к чему именно можно прийти в такого рода экспериментах. А нас всегда манит неизведанное, ведь так? :) Но разумеется, не все так просто. Почему? Потому что, для просчета такой системы, потребуются невероятные вычислительные ресурсы. И даже всех Ваших компьютеров для этого не хватит. Да, наша природа обладает невероятно мощным интерпретатором :) Но не стоит унывать, ведь у компании Intel далеко идущие планы, да и виртуальный мир мы можем значительно упростить.

### Конкуренты
Самой известной программой, реализующей указанные выше принципы является [Avida](https://en.wikipedia.org/wiki/Avida). По [этой ссылке](https://www.youtube.com/watch?v=oDC5BxiBakY) Вы можете ознакомиться с небольшим пояснением того, как она работает. Если захотите понять больше деталей, то вам [сюда](https://www.youtube.com/watch?v=ouF8wKxXWFQ). Думаю, так же, стоит упомянуть о прородителях - программах, которые появились задолго до того, как написали Avida. А именно: [Tierra](https://en.wikipedia.org/wiki/Tierra_(computer_simulation)) и [Core Wars](https://en.wikipedia.org/wiki/Core_War), которые внесли свой вклад в развитие этой области. Но все же, я бы хотел представить вашему вниманию другой проект - [jevo](https://github.com/tmptrash/jevo).

### jevo
Читается, как "джево" или "джей иво" и означает "Julia Evolution". Ничего особенного в этом названии нет и это никак не связано с эволюцией тех прекрасных особ, которых Вы так любите :) Просто [Julia](julialang.org) - это язык программирования, а Evolution - ну, сами понимаете. Это то, где Вы нас немного обогнали. Суть системы проста - это эмулятор виртуального мира, где живут, размножаются и приспосабливаются упомянутые цифровые организмы. Если спросите, как выглядит эта система? Пожалуйста:

![jevo screenshot](https://dl.dropboxusercontent.com/u/45900723/jevo/jevo.png)

Вот, что здесь происходит. Видите окошко по центру справа? Это 2D визуализатор (клиент), который "показывает", что происходит в "их" мире. Мир организмов может быть цикличным. Это означает, что когда кто-то выходит за его пределы, он появляется на другой стороне экрана. Так же, как если бы вы ходили вокруг земли. Разноцветные точки - это и есть цифровые организмы(небольшие программы). Небольшое количество зеленых точек - это энергия или еда. Окно слева - сервер. На нем просходит вся магия:
- параллельное выполнение кода всех цифровых организмов
- обслуживание сталкновений
- периодические мутации
- уничтожение менее приспособленных
- управление виртуальным миром
- и т.д.

Центральным понятием в жизни любого цифрового существа является энергия. Если она заканчивается - организм умирает. По этому, отбор уничтожает тех, кто не смог "найти" пропитание. Таким образом формируется вектор развития всей популяции - "найти, как можно больше еды". Так же, каждый организм представлен своим собственным кодом, который полностью решает, чем занято виртуальное животное. Код дописывается системой на основе [генетического алгоритма](https://ru.wikipedia.org/wiki/%D0%93%D0%B5%D0%BD%D0%B5%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9_%D0%B0%D0%BB%D0%B3%D0%BE%D1%80%D0%B8%D1%82%D0%BC). Это такие специальные правила поиска оптимального решения. А решением в нашем случае является оптимальный алгоритм поиска еды. Причем едой могут быть как энергетические блоки, так и сами организмы. Если Вы хотите больше красивых видео о генетическом алгоритме, то вам [сюда](https://www.youtube.com/watch?v=JBgG_VSP7f8) и [сюда](https://www.youtube.com/watch?v=uxourrlPlf8). Образовательные видео [здесь](https://jevosite.wordpress.com/2016/10/25/%D0%BF%D0%BE%D1%81%D1%82-6-%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE-%D0%BC%D0%B0%D1%82%D0%B5%D1%80%D0%B8%D0%B0%D0%BB%D1%8B/). Объясняя на пальцах, что такое ГА можно представить вот что:

```
1. INITIALIZE random organisms
2. EVALUATE each organism (fitness)
3. while !terminate do
4.   SELECT parents organisms for next generation
5.   RECOMBINE parents
6.   MUTATE children
7.   EVALUATE each organism (fitness)
8. end
```

Что это такое? Это реализация генетического алгоритма на абстрактном языке программирования. Сначала мы создаем рандомную популяцию организмов с пустым кодом (шаг 1). Далее, подсчитываем их "приспособленность" (в нашем случае это количество энергии, шаг 2). Потом, крутимся в цикле, пока не выполнится какое-то условие выхода, будь то время или получение нужного результата... (шаг 3). Находясь внутри цикла, мы выбираем родителей для получения потомства (шаг 4), рекомбинируем их генетический материал (код)(шаг 5), немного мутируем этот код (шаг 6) и подсчитываем приспособленность новой популяции (шаг 7). Под новой, в данном случае подразумевается старая + родившиеся "дети". И так до бесконечности... Пока все понятно? Окей, тогда пришло время глянуть на систему в динамике (смотреть на полный экран и в 1080, иначе ничего не увидите):

[![jevo](https://dl.dropboxusercontent.com/u/45900723/jevo/jevo-1.1-rc1.jpg)](https://youtu.be/79Fh7PNT6qY)

Что же мы увидели? Там было много зеленых точек, которые не двигались (это энергия, которую нужно съесть). Около пяти фиолетовых островков - это один из видов цифровых организмов, которые выжидают "бегунцов" и съедают их при приближении. И много двигающихся с разной траекторией точек (другие виды организмов - назовем их "бегунцы"). Стоит пояснить, что это результат примерно двухдневного запуска системы. Причем я никак не влиял на процесс их обучения и никак не вмешивался. По сути, мы видим, что эволюционировали две стратегии: "жди и кусай" и "беги и кусай". Давайте ответим на такие вопросы: "Как именно они двигаются?", "Какого они размера?", "Почему они это делают?". Итак, по порядку:
- Бегунцы двигаются по диагонали - потому что диагональ дает возможность "просканировать" все поле и найти максимум энергии. Представьте что будет, если кто-то двигается только вверх? Рано или позно он проел бы длинный коридор и все, конец. По этому, диагональное движение имеет приимущество перед прямолинейным.
- В основном программы короткие. Почему? Потому что большие программы тратят больше энергии на свое содержание и тем самым не энергоэффективны. Если программа большая, то она должна быть "оптимальна". В некотором смысле она должна быть умней или хитрей.
- Почему они это делают? По тому, что их программы управляют их поведением полностью.

Мы ведь все тут программисты, правда? Тогда, взглянем на код организмов:

```julia
function (c::Config.ConfigData,o::Creature.Organism)
    local var_1::Int8 = 110
    Creature.eatUp(c,o,Int(var_1))
    Creature.eatDown(c,o,Int(var_1))
    Creature.eatDown(c,o,Int(var_1))
    Creature.eatUp(c,o,Int(var_1))
    return true
end
```

Следует так же упомянуть, что все начиналось с пустого кода, а если быть точным, то с пустой функции. А пример выше, сформировался в результате нескольких десятков тысяч поколений. Что он делает? Эти функции `Creature.eatUp()` и `Creature.eatDown()` означают "укуси" сверху или снизу относительно собственной позиции. Последний параметр, `var_1` - это то, сколько "откусить". По сути, он просто сидит и ждет пока к нему кто-то подползет, после чего, жертва будет съедена. Вы спросите: "Откуда организм вообще знает, какие функции нужно вызывать?" или "Какие функции вообще существуют?". Система предоставляет некий [набор](https://github.com/tmptrash/jevo/blob/v1.1-rc1/src/organism/Code.jl)(смотри структуру `CODE_PARTS` в конце файла) из:
- математических операций для работы с переменными: `+`,`-`,`/`,`%`,...
- функций движения: `Creature.stepRight()`, `Creature.stepDown()`,...
- питания: `Creature.eatLeft()`, `Creature.eatRight()`,...
- бинарных операций: `xor`, `or`, `and`,...
- тригонометрии: `sin()`, `cos()`, `tan()`,...
- разных типов: `Int`, `Bool`, `Float64`, `String`,...
- работы с памятью: `toMem()`, `fromMem()`,...
- определение своих и чужих параметров: `myX()/myY()`, `energyLeft()`, `idRight()`,...
- возможности примитивного зрения: `lookAt(x,y)`
- элементы языка: циклы, переменные, функции, условия,...
- и т.д.

Окей, а что по поводу тех "бегунцов", которые все время двигаются? Пожалуйста:

```julia
function (c::Config.ConfigData,o::Creature.Organism)
    local var_1::Int8 = 110
    Creature.stepRight(o)
    Creature.eatRight(c,o,Int(var_1))
    Creature.stepRight(o)
    Creature.eatRight(c,o,Int(var_1))
    Creature.eatDown(c,o,Int(var_1))
    return true
end
```

В этом листинге, Вы видите другую стратегию поведения - "беги и кусай". Причем очень важно то, что кусать нужно перед собой. Иначе, наткнувшись на припятствие, организм застрянет и скорей всего умрет от недостатка энергии. Все те, кто так делал, давно вымерли. Небольшим бонусом здесь является "откусывание" снизу - `Creature.eatDown()`. Оно дает небольшое приимущество перед теми, кто кусает только спереди себя, так как, иногда под тобой может лежать энергия или сосед. Я намеренно показываю простые примеры, чтобы не забивать ваши лобные доли всякой дрянью. Если вы хотите глянуть на "переходные формы", то они хорошо освещены в [презентации](https://www.dropbox.com/s/fpffw9nga53k573/jevo.pptx?dl=0).

Окей, так какой план, мистер Фикс? План, мои друзья следующий:
- Упершись в производительность моих домашних компьютеров я вынужден написать распределенную систему для по настоящему "больших" вычислений, тогда можно будет говорить о действительно сложном поведении и все станет на много интересней
- Усложнить мир организмов: добавить день и ночь, камни, третье измерение и другие природные феномены нашего мира. Это заставит организмы вести себя более сложно.
- Добавить примитивы для "общения".
- Реализовать [crossover](https://en.wikipedia.org/wiki/Crossover_(genetic_algorithm)).
- Усложнить язык, на котором пишется код организмов. Сейчас это только 54 элемента языка.
- и т.д.

Чего я достиг? Пока не много. И это только по тому, что производительность моего PC очень низкая для такой задачи. Но все же:
- Максимально длинный код, который эволюционировал составлял 370 строк. Его особенностями были: оптимизированность, реиспользование функций, использование циклов и т.д.
- Появились примитивные алгоритмы сложного движения(смотри [презентацию](https://www.dropbox.com/s/fpffw9nga53k573/jevo.pptx?dl=0) для деталей) при котором вероятность нахождения энергетических точек значительно увеличивается.
- Эволюционировали две противоборствующие стратегии: "бегунцы" и "затаившиеся охотники", которые борются за ресурсы.
- Появилась простейшая [кооперация](https://www.youtube.com/watch?v=74Qxo3epWPI), где от того, как двигается твой сосед зависит сколько энергии ты найдешь.
- Появилось более четкое понимание эвлюционной теории.

P.S. Если Вы заинтересованы в такого рода экспериментах, Вы биолог или просто программист, которому интересно, пишите мне на [email](mailto:deadbrainman@gmail.com) и мы объеденим наши усилия для создания своего skynet.

Материалы:
- [презентация](https://www.dropbox.com/s/fpffw9nga53k573/jevo.pptx?dl=0)
- [видео презентация](https://www.youtube.com/watch?v=tF77s_4RA08)
- мой [блог](https://jevosite.wordpress.com/)
- мой [youtube канал](https://www.youtube.com/playlist?list=PL1NiKjXMaBimPuybPIXkVuO1MYy53XcdW)
- [я сам](https://www.facebook.com/tmptrash)
- [код проекта](https://github.com/tmptrash/jevo/tree/v1.1-rc1)

Продолжение следует...
